!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(5));class i extends HTMLElement{constructor(){super(),this.isBoldToggled=!1;const t=this.attachShadow({mode:"open"}),e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/icon?family=Material+Icons",t.appendChild(e);const n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode(r.default)),t.appendChild(n);const o=this.createIconButton("bold-btn","format_bold",t=>{this.btnClicked(i.BOLD_CLICKED_EVENT,t)}),s=this.createIconButton("italic-btn","format_italic",t=>{this.btnClicked(i.ITALIC_CLICKED_EVENT,t)}),a=this.createIconButton("underline-btn","format_underline",t=>{this.btnClicked(i.UNDERLINE_CLICKED_EVENT,t)}),d=this.createIconButton("strikethrough-btn","strikethrough_s",t=>{this.btnClicked(i.STRIKETHROUGH_CLICKED_EVENT,t)});this.common={boldButton:o,italicButton:s,underlineButton:a,strikethroughButton:d},t.appendChild(o),t.appendChild(s),t.appendChild(a),t.appendChild(d)}createIconButton(t,e,n=(()=>{})){const o=document.createElement("button");return o.id=t,o.classList.add("toolbar-btn","material-icons"),o.textContent=e,o.onmousedown=n,o}btnClicked(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:!0})),e.preventDefault()}}e.default=i,i.BOLD_CLICKED_EVENT="bold-clicked",i.ITALIC_CLICKED_EVENT="italic-clicked",i.UNDERLINE_CLICKED_EVENT="underline-clicked",i.STRIKETHROUGH_CLICKED_EVENT="strikethrough-clicked"},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(2)),i=o(n(0));customElements.define("zen-editor",r.default),customElements.define("zen-toolbar",i.default);const s=document.createElement("link");s.rel="stylesheet",s.href="https://fonts.googleapis.com/icon?family=Material+Icons",document.head.appendChild(s)},function(t,e,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n(3)),d=s(n(4)),c=s(n(0));class l extends HTMLElement{constructor(){super(),this.__hovered=!1,this.__focused=!1;const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(d.default)),t.appendChild(e),t.appendChild(this.toolbar=document.createElement("zen-toolbar"));const n=this.createEditor();t.appendChild(n),this.onfocus=()=>this.focused=!0,this.onblur=()=>this.focused=!1,this.toolbar.addEventListener(c.default.BOLD_CLICKED_EVENT,()=>document.execCommand("bold")),this.toolbar.addEventListener(c.default.ITALIC_CLICKED_EVENT,()=>document.execCommand("italic")),this.toolbar.addEventListener(c.default.UNDERLINE_CLICKED_EVENT,()=>document.execCommand("underline")),this.toolbar.addEventListener(c.default.STRIKETHROUGH_CLICKED_EVENT,()=>document.execCommand("strikethrough"))}get hovered(){return this.__hovered}set hovered(t){this.__hovered=t,this.toggleToolbar()}get focused(){return this.__focused}set focused(t){this.__focused=t,this.toggleToolbar()}toggleToolbar(){this.hovered||this.focused?this.toolbar.setAttribute("show","true"):this.toolbar.removeAttribute("show")}createEditor(){const t=document.createElement("div");return t.classList.add("zen-editor"),t.setAttribute("contentEditable","true"),t.onmouseenter=()=>this.hovered=!0,t.onmouseleave=()=>this.hovered=!1,t.onfocus=()=>this.focused=!0,t.onblur=()=>this.focused=!1,document.addEventListener(a.eventName,()=>this.selectionHandler()),t}selectionHandler(){Object.entries(this.toolbar.common).forEach(([t,e])=>e.removeAttribute("activated"));let t=null;t=this.shadowRoot&&void 0!==this.shadowRoot.getSelection?this.shadowRoot.getSelection():document.getSelection(),t&&Array.from(Array(t.rangeCount).keys()).forEach(e=>{const n=t.getRangeAt(e);let o=[];if(n.startContainer.isSameNode(n.endContainer)&&n.startContainer instanceof Text){const t=n.startContainer.textContent?n.startContainer.textContent.length:0;n.startOffset<t&&(o=this.getAncestors(n.startContainer))}else o=this.getRangeNodes(n);o.forEach(t=>{["STRONG","B"].some(e=>t.nodeName===e&&t.textContent)&&this.toolbar.common.boldButton.setAttribute("activated","true"),["EM","I"].some(e=>t.nodeName===e&&t.textContent)&&this.toolbar.common.italicButton.setAttribute("activated","true"),"U"===t.nodeName&&t.textContent&&this.toolbar.common.underlineButton.setAttribute("activated","true"),"STRIKE"===t.nodeName&&t.textContent&&this.toolbar.common.strikethroughButton.setAttribute("activated","true")})})}getAncestors(t,e=[]){return null===t.parentNode||null===this.shadowRoot||t.parentNode.isSameNode(this.shadowRoot.activeElement)?e:(e.push(t.parentNode),this.getAncestors(t.parentNode,e))}getDescendants(t,e=[]){if(t instanceof Node)return this.getDescendants(Array.from(t.childNodes),e);if(t.length<1)return e;const n=t.pop();return n&&(e.push(n),t.concat(Array.from(n.childNodes))),this.getDescendants(t,e)}getRangeNodes(t){let e=[],n=t.startContainer;for(;n;){n.isSameNode(t.startContainer)&&n.textContent&&n.textContent.length>t.startOffset&&(e=e.concat([...this.getAncestors(n),n]));const o=this.getDescendants(n);if(o.some(e=>e.isSameNode(t.endContainer))){t.endOffset>0&&(e=e.concat([...this.getAncestors(n),n,...o]));break}e=e.concat([...this.getAncestors(n),n,...o]),n=n.nextSibling}return e}}e.default=l},function(t,e,n){"use strict";n.r(e),n.d(e,"eventName",(function(){return c})),n.d(e,"findCaretFocus",(function(){return u})),n.d(e,"getRange",(function(){return b}));const o="attachShadow"in Element.prototype&&"getRootNode"in Element.prototype,r=!(!o||!document.createElement("div").attachShadow({mode:"open"}).getSelection),i=window.ShadyDOM&&window.ShadyDOM.inUse,s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a=!o||i||!r&&!s,d=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|script|source|style|template|track|wbr)$/,c="-shadow-selectionchange",l=[Node.ELEMENT_NODE,Node.TEXT_NODE,Node.DOCUMENT_FRAGMENT_NODE];function u(t,e){const n=[],o=t=>{for(let e=0;e<t.length;++e)t[e].shadowRoot&&n.push(t[e].shadowRoot)};for(e.shadowRoot&&n.push(e.shadowRoot),o(e.childNodes);n.length;){const e=n.shift();for(let n=0;n<e.childNodes.length;++n)if(t.containsNode(e.childNodes[n],!0))return e;o(e.querySelectorAll("*"))}return null}function h(t,e,n){const o=e.childNodes||e.children;if(!o)return e;for(let e=0;e<o.length;++e){const i=o[n?e:o.length-1-e];if((r=i,l.includes(r.nodeType))&&t.containsNode(i,!0)){if(t.containsNode(i,!1))return i;if(!d.exec(i.localName||""))return h(t,i,n)}}var r;return e}let f={node:null,offset:-1};function m(t,e,n){const o=e;for(;(e=g(e,n))&&e.contains(o););return!!e&&(e instanceof Element&&t.containsNode(e,!0))}function g(t,e){if(!e)return t.previousSibling||t.parentNode||null;for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}!function(){if(r||a)return document.addEventListener("selectionchange",t=>{document.dispatchEvent(new CustomEvent(c))}),()=>{};let t=!1;document.addEventListener("selectionchange",e=>{if(t)return;t=!0;const n=window.getSelection();if("Caret"===n.type){const t=u(n,n.anchorNode);if(t instanceof window.ShadowRoot){const e=b(t);if(e){const t=e.startContainer,n=e.startOffset;f={node:t,offset:n}}}}document.dispatchEvent(new CustomEvent("-shadow-selectionchange")),window.requestAnimationFrame(()=>{t=!1})})}();const p=new Map;function b(t){if(a){const e=document.getSelection();return e.containsNode(t,!0)?e.getRangeAt(0):null}if(r){const e=t.getSelection();return e.rangeCount?e.getRangeAt(0):null}const e=p.get(t);if(e)return e;const n=function(t){const e=window.getSelection();if("None"===e.type)return{range:null,type:"none"};if("Caret"!==e.type&&"Range"!==e.type)throw new TypeError("unexpected type: "+e.type);const n=h(e,t,!0);if(n===t)return{range:null,mode:"none"};const o=document.createRange();let r=null,i=void 0;if("Range"===e.type&&(r=h(e,t,!1),i=function(t,e,n){if("Range"!==t.type)return;const o=()=>t.toString().length,r=o();let i;return t.modify("extend","forward","character"),i=o(),i>r||m(t,n,!0)?(t.modify("extend","backward","character"),!0):i<r||!t.containsNode(e)?(t.modify("extend","backward","character"),!1):(t.modify("extend","backward","character"),i=o(),i>r||m(t,e,!1)?(t.modify("extend","forward","character"),!1):i<r||!t.containsNode(n)?(t.modify("extend","forward","character"),!0):void 0)}(e,n,r),void 0===i))return o.setStart(n,0),o.setEnd(r,r.length),{range:o,mode:"all"};const s=e.toString().length;let a=0,d=0;if(null===r);else if(r.nodeType===Node.TEXT_NODE){const t=r.textContent,n=r.nextSibling;for(let n=t.length-1;n>=0;--n){r.splitText(n);if(e.toString().length!==s){d=n+1;break}}for(r.insertData(r.length,t.substr(r.length));r.nextSibling!==n;)r.nextSibling.remove()}if(n.nodeType===Node.TEXT_NODE){n!==r&&(n.appendData("?"),e.collapseToStart(),e.modify("extend","right","character"));const t=n.textContent,o=n.nextSibling;for(let o=n===r?d:t.length-1;o>=0;--o)if(n.splitText(o),""===e.toString()){a=o;break}for(n.insertData(n.length,t.substr(n.length));n.nextSibling!==o;)n.nextSibling.remove();n!==r&&n.deleteData(n.length-1,1),null===r&&(r=n,d=a)}else null===r&&(r=n);1===s&&f&&f.node===n&&f.offset>a&&i&&(i=!1);!0===i?(e.collapse(n,a),e.extend(r,d)):!1===i?(e.collapse(r,d),e.extend(n,a)):e.setPosition(n,a);return o.setStart(n,a),o.setEnd(r,d),{range:o,mode:"normal"}}(t);return p.set(t,n.range),window.setTimeout(()=>{p.delete(t)},0),n.range}},function(t,e,n){"use strict";n.r(e),e.default=":host{display:inline-block;min-width:200px;position:relative}:host>.zen-editor{border:1px solid rgba(0,0,0,.4)}"},function(t,e,n){"use strict";n.r(e),e.default=":host{display:flex;align-items:center;justify-content:center;position:absolute;visibility:hidden;opacity:0;height:35px;width:150px;background-color:#000;border-radius:15px;top:-40px;transition:opacity .3s ease-out}:host>button.toolbar-btn{display:flex;align-items:center;color:#fff;font-size:1em;background-color:rgba(255,255,255,0);border:0;border-radius:20px;padding:5px;margin-left:.3em}:host>button.toolbar-btn[activated]{background-color:rgba(255,255,255,.3)}:host>button.toolbar-btn:hover{background-color:rgba(255,255,255,.3)}:host>button.toolbar-btn:nth-child(1){margin-left:0}:host([show]){visibility:visible;opacity:1}"}]);